#:import Window kivy.core.window.Window

<GameBoard@Widget>:

    canvas.before:
        Rectangle:
            source: 'assets/background/clean_monopoly_classic_board.jpg'
            size: root.height, root.height

    Button:
        text: '[b][color=#ffffff]Build/\nSell[/color][/b]'
        background_normal: 'assets/buttons/house.png'
        size: (root.width//6, root.width//6)
        background_down: 'assets/house-2.png'
        font_size: root.width // 80
        markup: True
        outline_color: 0,0,0,1
        outline_width: 3
        pos: (root.width//5, root.height//1.79)


    Button:
        text: '[b][color=#ffffff]Trade[/color][/b]'
        background_normal: 'assets/buttons/product.png'

        background_down: 'assets/buttons/product_2.png'
        size: (root.width//6, root.width//6)
        font_size: root.width // 60
        markup: True
        outline_color: 0,0,0,1
        outline_width: 3
        pos: (root.width//2.4, root.height//1.8)

    Button:
        text: '[b][color=#ffffff]Mortgage/\nRegain[/color][/b]'
        background_normal: 'assets/buttons/real.png'
        background_down: 'assets/buttons/real-2.png'
        size: (root.width//6, root.width//6)
        font_size: root.width // 80
        markup: True
        outline_color: 0,0,0,1
        outline_width: 3
        pos: (root.width//1.5, root.height//1.8)

    Button:
        id: player_turn_button
        text: '[b][color=#ffffff]Roll![/color][/b]'
        background_normal: 'assets/buttons/dice.png'
        background_down: 'assets/buttons/dice2.png'
        size: (root.width//10, root.width//10)
        pos: (root.width//1.85, root.height//1.4)
        font_size: root.width // 60
        markup: True
        outline_color: 0,0,0,1
        outline_width: 3

    Label:
        id: dice_1
        text: '[b][color=#000000]\u2680[/color][/b]'
        markup: True
        font_size: root.width // 10
        font_name: "assets/DejaVuSans.ttf"
        size: (root.width//10, root.width//10)
        pos: (root.width//2.9, root.height//1.4)

    Label:
        id: dice_2
        text: '[b][color=#000000]\u2681[/color][/b]'
        markup: True
        font_size: root.width // 10
        font_name: "assets/DejaVuSans.ttf"
        size: (root.width//10, root.width//10)
        pos: (root.width//2.35, root.height//1.4)

    Label:
        id: message_player_turn
        text: ''
        markup: True
        font_size: root.width // 30
        size: (root.width//20, root.width//20)
        pos: (root.width//2, root.height//2)


<CardInfoPop@Popup>:
    size_hint: (None, None)
    size: (Window.width//2, Window.height//2)
    title: ""
    separator_height: 0
    background: "assets/background/card.jpg"
    auto_dismiss: False

    GridLayout:

        cols: 2

        GridLayout:

            rows: 2

            size_hint_x: 1.5

            Image:
                id: card_image

            Label:
                id: card_info
                markup: True
                font_size: root.height//23

        Image:
            source: "assets/background/master.png"


<CardSelectPop@Popup>
    size_hint: (None, None)
    size: (Window.width//2, Window.height//2)
    title: ""
    separator_height: 0
    background: "assets/background/card.jpg"
    auto_dismiss: False

    GridLayout:
        rows: 3

        Image:
            source: 'assets/background/monopoly_logo.png'

        Label:
            id: label_1
            text: ''
            font_size: root.width // 40
            markup: True

        GridLayout:
            cols: 2
            size_hint_y: 0.5
            spacing: [root.width//15, root.width//15]
            padding: [root.width//15, 0, root.width//15, root.width//30]

            Button:
                id: button_left
                text: ''
                font_size: root.width // 42
                background_normal: 'assets/buttons/red.png'
                markup: True
                canvas.before:
                    Color:
                        rgba: .1, .1, .1, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                on_release:
                    root.player_decision(root.button_left)

            Button:
                id: button_right
                text: '[b][color=#ffffff]AUCTION[/b][/color]'
                font_size: root.width // 42
                background_normal: 'assets/buttons/red.png'
                markup: True
                canvas.before:
                    Color:
                        rgba: .1, .1, .1, 1
                    Line:
                        width: 5
                        rectangle: self.x, self.y, self.width, self.height
                on_release:
                    root.player_decision(root.button_right)

<PlayerAuctionPop@Popup>
    size_hint: (None, None)
    size: (Window.width//2, Window.height//2)
    separator_height: 0
    background: "assets/background/card.jpg"
    auto_dismiss: False

    GridLayout:
        rows: 2
        spacing: [root.width // 30, root.width // 30]

        Label:
            size_hint_y: 0.05
            id: current_square
            text: ""
            markup: True
            font_size: root.width // 30
            outline_color: 0,0,0,1
            outline_width: 1

        GridLayout:
            id: body_grid
            cols: 3

            BoxLayout:
                orientation: 'vertical'
                id: player_container
                spacing: [root.width // 80, root.width // 80]
                size_hint_x: 1

                Label:
                    id: player_1

            GridLayout:
                rows: 7
                size_hint_x: 3
                spacing: [root.width // 80, root.width // 80]
                padding: [root.width//30, 0, root.width//30, 0]
                Label:
                    id: highest_bid
                    text: "[b][color=#000000]HIGHEST BID: 10[/color][/b]"
                    markup: True
                    font_size: root.width // 42


                Button:
                    id: bid_skip
                    text: "[b][color=#ffffff]SKIP[/color][/b]"
                    background_normal: "assets/buttons/red.png"
                    markup: True
                    font_size: root.width // 42
                    canvas.before:
                        Color:
                            rgba: .1, .1, .1, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    on_release:
                        root.add_bid(0)

                Button:
                    id: bid_100
                    text: "[b][color=#ffffff] + $100[/color][/b]"
                    markup: True
                    background_normal: "assets/buttons/red.png"
                    background_disabled_normal: "assets/buttons/light_grey.jpg"
                    font_size: root.width // 42
                    canvas.before:
                        Color:
                            rgba: .1, .1, .1, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height

                    on_release:
                        root.add_bid(100)


                Button:
                    id: bid_50
                    text: "[b][color=#ffffff] + $50[/color][/b]"
                    markup: True
                    background_normal: "assets/buttons/red.png"
                    background_disabled_normal: "assets/buttons/light_grey.jpg"
                    font_size: root.width // 42
                    canvas.before:
                        Color:
                            rgba: .1, .1, .1, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height

                    on_release:
                        root.add_bid(50)

                Button:
                    id: bid_20
                    text: "[b][color=#ffffff] + $20[/color][/b]"
                    markup: True
                    background_normal: "assets/buttons/red.png"
                    background_disabled_normal: "assets/buttons/light_grey.jpg"
                    font_size: root.width // 42
                    canvas.before:
                        Color:
                            rgba: .1, .1, .1, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height

                    on_release:
                        root.add_bid(20)

                Button:
                    id: bid_10
                    text: "[b][color=#ffffff] + $10[/color][/b]"
                    markup: True
                    background_normal: "assets/buttons/red.png"
                    background_disabled_normal: "assets/buttons/light_grey.jpg"
                    font_size: root.width // 42
                    canvas.before:
                        Color:
                            rgba: .1, .1, .1, 1
                        Line:
                            width: 5
                            rectangle: self.x, self.y, self.width, self.height
                    on_release:
                        root.add_bid(10)

            Label:
                id: timer
                spacing: [root.width // 80, root.width // 80]
                size_hint_x: 1
                text: ""
                markup: True
                font_size: root.width // 20
                canvas:
                    Color:
                        rgb: [0.502,0.502,0.502]
                    Line:
                        width: 4
                        circle:
                            (self.pos[0] + self.width/2, self.pos[1] + self.height/2, min(self.width, self.height)
                            / 4, 0, 360)

<AuctionPlayerInfo@BoxLayout>

    PlayerIcon:
        id: player_icon
        bg_color: root.widget_color
        border_color: root.player_icon_border_color
        image_source: root.image_source

    Label:
        id: player_money
        text: root.money_text
        markup: True

        canvas:
            Color:
                rgba: root.widget_color
            Rectangle:
                pos: player_money.pos
                size: player_money.size
